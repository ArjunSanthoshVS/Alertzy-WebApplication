<div class="background pb-3">
  <div class="" style=" vh-100">

    <a class="navbar-brand mt-4" style="font-family: none; font-weight: 900; color: black;">
      <h1 class="text-center pt-5">Products</h1>
    </a>
    <div class="add d-flex justify-content-end">
      <a href="/admin/add-product" class="btn btn-primary ms-auto me-5">Add Product</a>
    </div>

    {{!--------------------------------------------------------------------------}}


    {{!-- <div class="add d-flex justify-content-end">
      <button type="button" class="btn btn-primary d-flex justify-content-end" data-bs-toggle="modal"
        data-bs-target="#cropperModal" data-bs-whatever=" @mdo">Add Product</button>
    </div>

    <div class="modal fade" id="cropperModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLabel">Add new Product</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form action="/admin/add-productSample" method="post" enctype="multipart/form-data">
              <div class="container m-5">
                <div class="row">
                  <div class="col-md-8">
                    <div class="row mb-3 mt-4">
                      <label for="" class="col-form-label">Product</label>
                      <div>
                        <input type="text" class="form-control" id="inputEmail3" name="product" required>
                      </div>
                    </div>
                    <div class="row mb-3 mt-4">
                      <label for="" class="col-form-label">Brand</label>
                      <div>
                        <input type="text" class="form-control" id="inputEmail3" name="brand" required>
                      </div>
                    </div>

                    <div class="row mb-3 mt-4">
                      <label for="" class="col-form-label">Stock</label>
                      <div>
                        <input type="number" class="form-control" id="inputEmail3" name="stock" required>
                      </div>
                    </div>
                    <div class="row mb-3 mt-4">
                      <label for="" class="col-form-label">Actual Price</label>
                      <div>
                        <input type="number" class="form-control" name="actualprice" required>
                      </div>
                    </div>
                    <div class="row mb-3 mt-4  ">
                      <label for="" class="col-form-label">Offer Price</label>
                      <div>
                        <input type="number" class="form-control" name="offerprice" required>
                      </div>
                    </div>
                    <div class="row mb-3 mt-4">
                      <label for="" class="col-form-label">Category</label>
                      <div>
                        <select id="inputState" class="form-select" name="category" required>
                          <option selected>Choose the Category...</option>
                          {{#each category}}
                          <option>{{this.category}}</option>
                          {{/each}}
                        </select>
                      </div>
                    </div>
                    <input type="file" name="image" id="file" accept="image/*" multiple />
                  </div>
                </div>
              </div>

              <input type="hidden" id="post_img_data" name="image_data_url">
              <div class="modal-body p-4">
                <div class="img-preview"></div>
                <div id="galleryImages"></div>
                <div id="cropper">
                  <canvas id="cropperImg" width="0" height="0"></canvas>
                  <button type="button" class="cropImageBtn btn btn-danger" style="display:none;"
                    id="cropImageBtn">Crop</button>
                </div>
                <div id="imageValidate" class="text-danger"></div>
              </div>
              <div class="d-flex justify-content-end">
                <button type="submit" class="btn btn-primary">Save</button>
              </div>
            </form>
          </div>
          {{!-- <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Send message</button>
          </div> --}}
        </div>
      </div>
    </div> --}}

    {{!--.....................................................................................---}}

    <div class="d-flex justify-content-center" style="">
      {{!-- <form class="d-flex">
        <input class="form-control me-1" type="search" placeholder="Search" aria-label="Search">
        <button class="btn btn-primary" type="submit">
          <i class="fa-solid fa-magnifying-glass"></i>
        </button>
      </form> --}}
      <div class="row mb-3" style="width: 100%; margin-left: 8%; margin-right: 2%;">

        <table id="example" class="table table-hover table-bordered " style="width:100%">
          <thead>
            <tr>
              <th scope="col">No</th>
              <th scope="col">Product</th>
              <th scope="col">Brand</th>
              <th scope="col">Stock</th>
              <th scope="col">Actual Price</th>
              <th scope="col">Offer Price</th>
              <th scope="col">Category</th>
              <th scope="col">Image</th>
              <th scope="col">Edit</th>
              <th scope="col">Delete</th>
            </tr>
          </thead>
          <tbody>
            {{#each products}}
            <tr>
              <th scope="row" class="align-middle fw-b">{{inc @index}}</th>
              <td class="align-middle fw-b">{{this.product}}</td>
              <td class="align-middle fw-b">{{this.brand}}</td>
              <td class="align-middle fw-b">{{this.stock}}</td>
              <td class="align-middle fw-b">{{this.actualPrice}}</td>
              {{#if this.offerPrice}}
              <td class="align-middle fw-b">{{this.offerPrice}}</td>
              {{else}}
              <td class="align-middle fw-b">No Offer</td>
              {{/if}}
              <td class="align-middle fw-b">{{this.category}}</td>
              <td><img style="width:100px; height:100px;" src="/product-images/{{this._id}}/{{this._id}}_0.png" alt="">
              </td>
              <td class="align-middle fw-b"><a href="/admin/edit-product/{{this._id}}"><i
                    class="fa-solid fa-pen-to-square d-flex justify-content-center" style="font-size:20px;"></i></a>
              </td>
              <td class="align-middle fw-b"><button onclick="deleteProduct('{{this._id}}')" style="border: 0;"> <i
                    class="fa-solid fa-trash" style="font-size:20px; color: red;"></i>
                </button> </td>
            </tr>
            {{/each}}
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>



<script>
  $(document).ready(function () {
    $('#example').DataTable();
  });
</script>